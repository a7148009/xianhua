<view class="container">
  <!-- é¡¶éƒ¨ç»Ÿè®¡å¡ç‰‡ -->
  <view class="stats-card">
    <view class="stat-item">
      <text class="stat-value">{{totalPages}}</text>
      <text class="stat-label">åˆä½œé¡µé¢æ€»æ•°</text>
    </view>
    <view class="stat-item">
      <text class="stat-value">{{activePages}}</text>
      <text class="stat-label">æ´»è·ƒé¡µé¢</text>
    </view>
    <view class="stat-item">
      <text class="stat-value">{{totalMembers}}</text>
      <text class="stat-label">æ€»æˆå‘˜æ•°</text>
    </view>
  </view>

  <!-- æ“ä½œæŒ‰é’® -->
  <view class="action-bar">
    <button class="create-btn" bindtap="navigateToCreate">
      <text class="btn-icon">â•</text>
      <text>åˆ›å»ºåˆä½œé¡µé¢</text>
    </button>
  </view>

  <!-- é¡µé¢åˆ—è¡¨ -->
  <view class="page-list">
    <view
      wx:for="{{pages}}"
      wx:key="_id"
      class="page-item"
      bindtap="viewPageDetail"
      data-page="{{item}}"
    >
      <!-- é¡µé¢å°é¢ -->
      <view class="page-cover">
        <image
          wx:if="{{item.cover_image}}"
          class="cover-image"
          src="{{item.cover_image}}"
          mode="aspectFill"
        />
        <view wx:else class="cover-placeholder">
          <text class="placeholder-icon">ğŸ¤</text>
        </view>
      </view>

      <!-- é¡µé¢ä¿¡æ¯ -->
      <view class="page-info">
        <view class="page-header">
          <text class="page-name">{{item.page_name}}</text>
          <view class="status-badge status-{{item.status}}">
            {{item.status === 'active' ? 'æ´»è·ƒ' : item.status === 'disabled' ? 'å·²ç¦ç”¨' : 'å·²åˆ é™¤'}}
          </view>
        </view>

        <text class="page-desc">{{item.page_desc || 'æš‚æ— æè¿°'}}</text>

        <view class="page-stats">
          <text class="stat-text">ğŸ‘¥ æˆå‘˜: {{item.member_count}}/{{item.max_members}}</text>
          <text class="stat-text">ğŸ“ æ–‡ç« : {{item.article_count}}</text>
          <text class="stat-text">ğŸ‘ æµè§ˆ: {{item.total_views || 0}}</text>
        </view>

        <view class="page-meta">
          <text class="meta-text">åˆ›å»ºæ—¶é—´: {{formatDate(item.create_time)}}</text>
        </view>
      </view>

      <!-- æ“ä½œæŒ‰é’® -->
      <view class="page-actions">
        <button
          class="action-btn edit-btn"
          catchtap="editPage"
          data-page="{{item}}"
        >
          ç¼–è¾‘
        </button>
        <button
          class="action-btn price-btn"
          catchtap="managePrices"
          data-page="{{item}}"
        >
          ä»·æ ¼ç®¡ç†
        </button>
        <button
          class="action-btn stats-btn"
          catchtap="viewStats"
          data-page="{{item}}"
        >
          ç»Ÿè®¡
        </button>
        <button
          wx:if="{{item.status !== 'deleted'}}"
          class="action-btn delete-btn"
          catchtap="deletePage"
          data-page="{{item}}"
        >
          åˆ é™¤
        </button>
      </view>
    </view>

    <!-- ç©ºçŠ¶æ€ -->
    <view wx:if="{{pages.length === 0 && !loading}}" class="empty-state">
      <text class="empty-icon">ğŸ“­</text>
      <text class="empty-text">è¿˜æ²¡æœ‰åˆ›å»ºä»»ä½•åˆä½œé¡µé¢</text>
      <button class="empty-btn" bindtap="navigateToCreate">åˆ›å»ºç¬¬ä¸€ä¸ªé¡µé¢</button>
    </view>

    <!-- åŠ è½½çŠ¶æ€ -->
    <view wx:if="{{loading}}" class="loading-state">
      <text class="loading-text">åŠ è½½ä¸­...</text>
    </view>
  </view>
</view>
