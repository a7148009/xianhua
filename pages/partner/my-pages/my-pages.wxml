<view class="container">
  <!-- ç»Ÿè®¡å¡ç‰‡ -->
  <view class="stats-card">
    <view class="stat-item">
      <text class="stat-value">{{pages.length}}</text>
      <text class="stat-label">åŠ å…¥çš„é¡µé¢</text>
    </view>
    <view class="stat-item">
      <text class="stat-value">{{totalArticles}}</text>
      <text class="stat-label">å‘å¸ƒçš„æ–‡ç« </text>
    </view>
  </view>

  <!-- é¡µé¢åˆ—è¡¨ -->
  <view class="page-list">
    <view
      wx:for="{{pages}}"
      wx:key="_id"
      class="page-card"
      bindtap="viewPageDetail"
      data-page="{{item}}"
    >
      <!-- å°é¢ -->
      <view class="page-cover">
        <image
          wx:if="{{item.cover_image}}"
          class="cover-image"
          src="{{item.cover_image}}"
          mode="aspectFill"
        />
        <view wx:else class="cover-placeholder">
          <text class="placeholder-icon">ğŸ¤</text>
        </view>

        <!-- è§’è‰²æ ‡ç­¾ -->
        <view class="role-tag role-{{item.my_role}}">
          {{item.my_role === 'moderator' ? 'ç®¡ç†å‘˜' : 'æˆå‘˜'}}
        </view>
      </view>

      <!-- é¡µé¢ä¿¡æ¯ -->
      <view class="page-info">
        <text class="page-name">{{item.page_name}}</text>
        <text class="page-desc">{{item.page_desc || 'æš‚æ— æè¿°'}}</text>

        <view class="my-stats">
          <text class="stats-item">ğŸ“ æˆ‘å‘å¸ƒäº† {{item.my_published_count}} ç¯‡</text>
          <text class="stats-item">ğŸ“… {{formatDate(item.my_join_time)}}</text>
        </view>

        <view class="page-meta">
          <text class="meta-item">ğŸ‘¥ æˆå‘˜: {{item.member_count}}/{{item.max_members}}</text>
          <text class="meta-item">ğŸ“„ æ–‡ç« : {{item.article_count}}ç¯‡</text>
        </view>
      </view>

      <!-- æ“ä½œæŒ‰é’® -->
      <view class="page-actions">
        <button
          class="action-btn publish-btn"
          catchtap="publishArticle"
          data-page="{{item}}"
        >
          å‘å¸ƒæ–‡ç« 
        </button>
        <button
          class="action-btn quit-btn"
          catchtap="quitPage"
          data-page="{{item}}"
        >
          é€€å‡ºé¡µé¢
        </button>
      </view>
    </view>

    <!-- ç©ºçŠ¶æ€ -->
    <view wx:if="{{pages.length === 0 && !loading}}" class="empty-state">
      <text class="empty-icon">ğŸ“­</text>
      <text class="empty-text">æ‚¨è¿˜æ²¡æœ‰åŠ å…¥ä»»ä½•åˆä½œé¡µé¢</text>
      <button class="empty-btn" bindtap="browsePage">æµè§ˆåˆä½œé¡µé¢</button>
    </view>

    <!-- åŠ è½½çŠ¶æ€ -->
    <view wx:if="{{loading}}" class="loading-state">
      <text class="loading-text">åŠ è½½ä¸­...</text>
    </view>
  </view>
</view>
