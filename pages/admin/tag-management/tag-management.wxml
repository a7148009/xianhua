<!-- pages/admin/tag-management/tag-management.wxml -->
<view class="container">
  <!-- цУНф╜ЬцМЙщТохМ║ -->
  <view class="action-buttons">
    <button class="action-btn primary" bindtap="openAddModal" disabled="{{tagList.length >= 20}}">
      тЮХ ц╖╗хКацаЗчн╛ ({{tagList.length}}/20)
    </button>
  </view>

  <!-- шп┤цШОф┐бцБп -->
  <view class="info-card">
    <view class="info-title">ЁЯТб цаЗчн╛шп┤цШО</view>
    <view class="info-text">
      цаЗчн╛чФиф║Оф┐бцБпхПСх╕ГцЧ╢х┐лщАЯщАЙцЛйх╕╕чФих▒ЮцАзя╝МхжВя╝ЪC1щй╛чЕзуАБцЬЙч╗ПщкМшАЕф╝ШхЕИуАБхМЕхРГхМЕф╜ПчнЙуАВцЬАхдЪцФпцМБ20ф╕кцаЗчн╛уАВ
    </view>
  </view>

  <!-- цаЗчн╛хИЧшби -->
  <view class="tag-list">
    <view wx:if="{{loading}}" class="loading-state">
      <text>хКаш╜╜ф╕н...</text>
    </view>

    <view wx:elif="{{tagList.length === 0}}" class="empty-state">
      <text>цЪВцЧацаЗчн╛цХ░цНо</text>
      <text class="empty-hint">чВ╣хЗ╗ф╕КцЦ╣цМЙщТоц╖╗хКацаЗчн╛</text>
    </view>

    <view wx:else>
      <view wx:for="{{tagList}}" wx:key="_id" class="tag-item">
        <view class="tag-info">
          <view class="tag-name">{{item.name}}</view>
          <view class="tag-meta">
            <text class="tag-order">цОТх║П: {{item.order}}</text>
          </view>
        </view>
        <view class="tag-actions">
          <button class="edit-btn" bindtap="openEditModal" data-tag="{{item}}">
            ч╝Цш╛С
          </button>
          <button class="delete-btn" bindtap="deleteTag" data-tag="{{item}}">
            хИащЩд
          </button>
        </view>
      </view>
    </view>
  </view>

  <!-- ц╖╗хКацаЗчн╛х╝╣чкЧ -->
  <view wx:if="{{showAddModal}}" class="modal-overlay" catchtap="closeAddModal">
    <view class="modal" catchtap="stopPropagation">
      <view class="modal-header">
        <text class="modal-title">ц╖╗хКацаЗчн╛</text>
        <text class="close-btn" catchtap="closeAddModal">├Ч</text>
      </view>

      <view class="modal-body">
        <view class="form-item">
          <text class="form-label">цаЗчн╛хРНчз░:</text>
          <input
            class="form-input"
            placeholder="шп╖ш╛УхЕецаЗчн╛хРНчз░я╝МхжВя╝ЪC1щй╛чЕз"
            value="{{newTagName}}"
            bindinput="onNewTagInput"
            focus="{{showAddModal}}"
            maxlength="10"
          />
        </view>

        <view class="form-hint">
          цПРчд║я╝ЪцаЗчн╛хРНчз░ф╕Нш╢Еш┐З10ф╕кхнЧ
        </view>
      </view>

      <view class="modal-footer">
        <button class="modal-btn cancel" catchtap="closeAddModal">хПЦц╢И</button>
        <button class="modal-btn confirm" catchtap="confirmAdd">чбошодц╖╗хКа</button>
      </view>
    </view>
  </view>

  <!-- ч╝Цш╛СцаЗчн╛х╝╣чкЧ -->
  <view wx:if="{{showEditModal}}" class="modal-overlay" catchtap="closeEditModal">
    <view class="modal" catchtap="stopPropagation">
      <view class="modal-header">
        <text class="modal-title">ч╝Цш╛СцаЗчн╛</text>
        <text class="close-btn" catchtap="closeEditModal">├Ч</text>
      </view>

      <view class="modal-body">
        <view class="form-item">
          <text class="form-label">цаЗчн╛хРНчз░:</text>
          <input
            class="form-input"
            placeholder="шп╖ш╛УхЕецаЗчн╛хРНчз░"
            value="{{editTagName}}"
            bindinput="onEditTagInput"
            focus="{{showEditModal}}"
            maxlength="10"
          />
        </view>
      </view>

      <view class="modal-footer">
        <button class="modal-btn cancel" catchtap="closeEditModal">хПЦц╢И</button>
        <button class="modal-btn confirm" catchtap="confirmEdit">чбошодф┐оцФ╣</button>
      </view>
    </view>
  </view>
</view>
